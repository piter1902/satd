\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\usepackage[hidelinks]{hyperref}
\usepackage{listings}

\lstset { frame = single }

\begin{document}

\begin{titlepage}
\title{\textbf{
	{\Huge Práctica 3: Integración de \emph{KNIME} y \emph{WEKA}}\\
	{\Large Sistemas de Ayuda a la Toma de Decisiones}
}}
\author{
	Pedro Allué Tamargo (758267)
	\and
	Juan José Tambo Tambo (755742)
	\and
	Jesús Villacampa Sagaste (755739)
}
\date{\today}
\clearpage\maketitle
\thispagestyle{empty}
\end{titlepage}

\tableofcontents

\newpage
\section{Ejercicio 1}

Se ha creado el \emph{workflow} ilustrado en la Figura \textbf{numFigura} para trabajar con los datos del conjunto de datos \emph{yellow-small.data}.\\
Se ha utilizado un nodo \emph{Rule Engine} para crear una nueva columna \emph{``class''}. El contenido de este nodo son las siguientes reglas:

\begin{lstlisting}
$Color$ MATCHES "YELLOW" AND $Size$ MATCHES "SMALL" => "inflated"
TRUE => "not inflated"
\end{lstlisting}

Tras este nodo se ha utilizado un nodo \emph{String manipulation} para concatenar los valores de las columnas \emph{class} e \emph{inflated (true/false)} utilizando la expresión:

\begin{lstlisting}
string($class$ + " is " + $Inflated (True/False)$)
\end{lstlisting}

{\Huge \textbf{Meter figura aqui}}

\section{Ejercicio 2}

Se va a proceder a analizar un conjunto de datos que describe el número de visitantes de un sitio web en los meses de junio/julio de 2010 (fichero \emph{website1.txt}).\\

Para calcular los parámetros de media, desviación típica, Kurtosis se ha utilizado el \emph{workflow} mostrado en la Figura \textbf{numFigura}.\\
La \emph{Kurtosis} es una medida estadística que muestra la forma de una distribución de probabilidad. Una \emph{Kurtosis} grande implica una mayor concentración de valores de la variables o muy cerca de la media de la distribución (pico) o muy lejos de ella (colas de la distribución), al mismo tiempo que existe una menor frecuencia de valores intermedios.\\
\textbf{¿Cómo ilustramos esto en este conjunto de datos?}\\

Para entrenar la red Bayesiana (Figura \textbf{numFigura}) se deben preparar los datos. Para ello se debe crear una nueva columna \emph{isWeekend} para ilustrar si es fin de semana o no. Utilizando el nodo \emph{Rule engine} se utilizarán las siguientes reglas:

\begin{lstlisting}
$weekday$ MATCHES "Sat" => "Yes"
$weekday$ MATCHES "Sun" => "Yes"
TRUE => "No"
\end{lstlisting}

Se ha utilizado un nodo \emph{Column filter} para eliminar la columna \emph{weekday} ya que la red Bayesiana presenta un mejor rendimiento si conoce este valor ya que si se entrena con esta variable reconoce la regla de creación de la columna \emph{isWeekend}.\\
Para llegar a esta conclusión se han probado las distintas combinaciones de columnas utilizando el \emph{Column Filter}.\\
\textbf{¿Explica más pruebas realizadas?}\\

Para dibujar la curva \emph{ROC} se ha utilizado un nodo \emph{ROC Cuve (local)} a la salida del nodo \emph{Naive Bayes Predictor}. Se puede observar en la Figura \textbf{numFigura} que la forma de la gráfica... \textbf{(?)}.\\


{\Huge \textbf{Meter figura aqui}}

{\Huge \textbf{Meter gráfica aqui}}


\section{Ejercicio 3}

Para la evaluación de los distintos conjuntos de datos se han creado 2 \emph{workflows}. Uno de ellos (Figura \textbf{numFigura}) utiliza las herramientas de \emph{KNIME} para evaluar los datos. El otro (Figura \textbf{numFigura}) utiliza las herramientas de \emph{WEKA} para evaluar los datos.\\

Para el conjunto de datos \emph{wine} se han entrenado las distintas herramientas con el 80\%, 50\% y 30\%.\\
Para el conjunto de datos \emph{iris} se han entrenado las distintas herramientas con el 80\%, 50\% y 30\%.\\

Para el conjunto de datos \emph{adult} se han entrenado las distintas herramientas con el 80\%, 50\% y 30\%.
En el anexo se pueden observar las tablas comparativas de las distintas ejecuciones del \emph{workflow} tanto con \emph{KNIME} (K) como con \emph{WEKA} (W). Se puede apreciar que conforme se reduce el número de datos de entrenamiento se pierde precisión, identificando datos pertenecientes a la otra clase de datos ($>$50K) como datos de clase $<=$50K. El método que más ha errado en la identificación de las clases ha sido el perceptrón multicapa.\\
El método que menos ha variado la precisión conforme se entrenaba con menos datos ha sido el \emph{J48} y en especial utilizando los nodos de \emph{WEKA} siempre ha mantenido el porcentaje de \emph{True Positives} por encima del 93\% en la clase $<=$50K y del 60\% en la clase $>$50K.\\


{\Huge \textbf{Meter datos en el Anexo 1}}\\

En cuanto a los problemas que han surgido, con el \emph{dataset} \emph{adult} se necesitaba una columna \emph{Class} y por lo tanto, se ha renombrado la última columna a \emph{``Class''}. Para ello se ha utilizado un nodo \emph{Column Filter} para eliminar todas las variables no numéricas.\\


{\Huge \textbf{Meter figura workflow 1 aqui}}

{\Huge \textbf{Meter figura workflow 2 aqui}}

\newpage
\section{Anexo 1: Cuadros de datos ejercicio 3}

\subsection{Dataset Adult}

\subsubsection{Naive Bayes}
\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{0.942}          & \multicolumn{1}{l|}{0.058}          & \multicolumn{1}{l|}{0.936}          & \multicolumn{1}{l|}{0.064} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.511}          & \multicolumn{1}{l|}{0.489}          & \multicolumn{1}{l|}{0.515}          & \multicolumn{1}{l|}{0.485} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 80\% usando \emph{Naive Bayes}}
\label{tab:adult_bayes_80}
\end{table}

\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{0.941}          & \multicolumn{1}{l|}{0.059}          & \multicolumn{1}{l|}{0.933}          & \multicolumn{1}{l|}{0.067} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.513}          & \multicolumn{1}{l|}{0.487}          & \multicolumn{1}{l|}{0.513}          & \multicolumn{1}{l|}{0.487} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 50\% usando \emph{Naive Bayes}}
\label{tab:adult_bayes_50}
\end{table}

\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{0.939}          & \multicolumn{1}{l|}{0.061}          & \multicolumn{1}{l|}{0.934}          & \multicolumn{1}{l|}{0.066} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.508}          & \multicolumn{1}{l|}{0.492}          & \multicolumn{1}{l|}{0.522}          & \multicolumn{1}{l|}{0.478} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 30\% usando \emph{Naive Bayes}}
\label{tab:adult_bayes_30}
\end{table}

\newpage
\subsubsection{J48}

\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{0.900}          & \multicolumn{1}{l|}{0.100}          & \multicolumn{1}{l|}{0.936}          & \multicolumn{1}{l|}{0.064} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.603}          & \multicolumn{1}{l|}{0.397}          & \multicolumn{1}{l|}{0.621}          & \multicolumn{1}{l|}{0.379} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 80\% usando \emph{J48}}
\label{tab:adult_j48_80}
\end{table}

\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{0.897}          & \multicolumn{1}{l|}{0.103}          & \multicolumn{1}{l|}{0.937}          & \multicolumn{1}{l|}{0.063} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.598}          & \multicolumn{1}{l|}{0.402}          & \multicolumn{1}{l|}{0.607}          & \multicolumn{1}{l|}{0.392} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 50\% usando \emph{J48}}
\label{tab:adult_j48_50}
\end{table}

\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{0.890}          & \multicolumn{1}{l|}{0.110}          & \multicolumn{1}{l|}{0.933}          & \multicolumn{1}{l|}{0.067} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.599}          & \multicolumn{1}{l|}{0.401}          & \multicolumn{1}{l|}{0.600}          & \multicolumn{1}{l|}{0.400} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 30\% usando \emph{J48}}
\label{tab:adult_j48_30}
\end{table}

\newpage
\subsection{Perceptrón multicapa}
\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{0.901}          & \multicolumn{1}{l|}{0.099}          & \multicolumn{1}{l|}{0.927}          & \multicolumn{1}{l|}{0.073} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.377}          & \multicolumn{1}{l|}{0.623}          & \multicolumn{1}{l|}{0.602}          & \multicolumn{1}{l|}{0.398} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 80\% usando \emph{Perceptrón multicapa}}
\label{tab:adult_perceptron_80}
\end{table}

\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{1.000}          & \multicolumn{1}{l|}{0.000}          & \multicolumn{1}{l|}{0.930}          & \multicolumn{1}{l|}{0.070} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.000}          & \multicolumn{1}{l|}{1.000}          & \multicolumn{1}{l|}{0.605}          & \multicolumn{1}{l|}{0.395} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 50\% usando \emph{Perceptrón multicapa}}
\label{tab:adult_perceptron_50}
\end{table}

\begin{table}[h]
\begin{tabular}{lllll}
\hline
\multicolumn{1}{|c|}{\textbf{Clase}} & \multicolumn{1}{c|}{\textbf{True Positives (K)}} & \multicolumn{1}{c|}{\textbf{False Positives (K)}} & \multicolumn{1}{c|}{\textbf{True Positives (W)}} & \multicolumn{1}{l|}{\textbf{False Positives (W)}} \\ \hline
\multicolumn{1}{|l|}{\textbf{$<=$50K}} & \multicolumn{1}{l|}{0.890}          & \multicolumn{1}{l|}{0.110}          & \multicolumn{1}{l|}{0.932}          & \multicolumn{1}{l|}{0.068} \\ \hline
\multicolumn{1}{|l|}{\textbf{$>$50K}} & \multicolumn{1}{l|}{0.389}          & \multicolumn{1}{l|}{0.611}          & \multicolumn{1}{l|}{0.587}          & \multicolumn{1}{l|}{0.413} \\ \hline
\textbf{}                       &                                &                                &                                &                      
\end{tabular}
\caption{Datos de entrenamiento del dataset \emph{Adult} con el 30\% usando \emph{Perceptrón multicapa}}
\label{tab:adult_perceptron_30}
\end{table}




\end{document}